# ROS Beginner Tutorials

## Introduction

This repository implements simple obstacle avoidance for a turtlebot3 robot in a gazebo simulation. The robot uses the laser range finder to detect obstacles and turns to avoid them.

## Dependencies 

This repository assumes you are running Ubuntu 18.04 with ROS Melodic installed. To install ROS Melodic see [here](http://wiki.ros.org/melodic/Installation/Ubuntu).

## Instructions for Running the Program

To run this repository you must first create a catkin workspace. The following directions will apply for a catkin_ws in your home directory. 

```
source /opt/ros/melodic/setup.bash
mkdir -p ~/catkin_ws/src
cd ~/catkin_ws/
catkin_make
```

After you have created a catkin workspace you can clone this repository into the src directory

```
cd ~/catkin_ws/src
git clone https://github.com/jaybrecht/Working-with-Gazebo.git turtlebot_walker
```

Then you need to build the catkin_ws

```
cd ~/catkin_ws/
catkin_make
```

### Running the simulation

A single launch file will open the world, spawn the robot and begin the obstacle avoidance.

    roslaunch turtlebot_walker turtlebot3_world.launch

### Recording a rosbag file

If you want to record a rosbag file use the following commands

    roslaunch turtlebot_walker turtlebot3_world.launch record:=true

### Inspecting the rosbag file

To inspect the bag file run the following commands:
```
source /opt/ros/melodic/setup.bash
cd ~/catkin_ws/src/turtlebot_walker/results
rosbag info <your_bag_file>
```
The bag file name is autogenerated by timestamp. Use tab completion to find the file.

### Playing back the rosbag file

To replay you need to open the world without the obstacle avoidance running. To do this run the command:

     roslaunch turtlebot_walker turtlebot3_world.launch avoid:=false

Then in a new terminal run the following commands: 

```
source /opt/ros/melodic/setup.bash
cd ~/catkin_ws/src/turtlebot_walker/results
rosbag play <your_bag_file>
```

The bag file name is autogenerated by timestamp. Use tab completion to find the file.

### Changing the robot type

You can change the robot type with an argument in the launch file (three model options: burger, waffle, waffle_pi)

    roslaunch turtlebot_walker turtlebot3_world.launch model:=<model>



